<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Flashcards Lite – Medical Q&A</title>
    <style>
      :root {
        --bg: #0f172a; /* slate-900 */
        --panel: #111827; /* gray-900 */
        --muted: #94a3b8; /* slate-400 */
        --text: #e5e7eb; /* gray-200 */
        --accent: #22c55e; /* green-500 */
        --chip: #1f2937; /* gray-800 */
        --chipBorder: #334155; /* slate-700 */
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Inter, Arial;
        background: linear-gradient(180deg, #0b1228, #0b132b 30%, #0f172a);
        color: var(--text);
        min-height: 100svh;
      }
      header {
        position: sticky;
        top: 0;
        z-index: 10;
        backdrop-filter: blur(10px);
        background: rgba(15, 23, 42, 0.7);
        border-bottom: 1px solid #1f2937;
      }
      .wrap {
        max-width: 1100px;
        margin: auto;
        padding: 16px;
      }
      .title {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      .title h1 {
        font-size: clamp(20px, 2.6vw, 28px);
        margin: 0;
        letter-spacing: 0.2px;
      }
      .muted {
        color: var(--muted);
      }

      /* Controls */
      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        margin-top: 10px;
      }
      .chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border: 1px solid var(--chipBorder);
        border-radius: 999px;
        background: var(--chip);
        cursor: pointer;
        user-select: none;
        transition: 0.2s transform;
      }
      .chip input {
        appearance: none;
        width: 14px;
        height: 14px;
        border: 2px solid var(--muted);
        border-radius: 3px;
        display: inline-block;
        position: relative;
      }
      .chip input:checked {
        border-color: var(--accent);
        background: linear-gradient(180deg, #10b981, #22c55e);
      }
      .chip:hover {
        transform: translateY(-1px);
      }
      .btn {
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid #334155;
        background: #0b1224;
        color: var(--text);
        cursor: pointer;
      }
      .btn:hover {
        filter: brightness(1.1);
      }
      .search {
        flex: 1 1 240px;
        min-width: 220px;
      }
      .search input {
        width: 100%;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid #334155;
        background: #0b1224;
        color: var(--text);
      }

      /* Grid */
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 16px;
        padding: 18px 16px 34px;
      }

      /* Card */
      .card {
        background: radial-gradient(
            1200px 200px at 50% -100px,
            rgba(34, 197, 94, 0.07),
            transparent 60%
          ),
          var(--panel);
        border: 1px solid #1f2937;
        border-radius: 16px;
        padding: 14px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        display: flex;
        flex-direction: column;
        gap: 10px;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition: transform 0.15s ease, border-color 0.2s ease;
      }
      .card:hover {
        transform: translateY(-2px);
        border-color: #334155;
      }
      .q {
        font-weight: 600;
        line-height: 1.3;
      }
      .topicRow {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .topic {
        font-size: 12px;
        padding: 4px 8px;
        border-radius: 999px;
        background: #0b1224;
        border: 1px solid #1f2937;
        color: #a5b4fc;
      }

      .answers {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .answers li {
        padding: 10px 12px;
        background: #0b1224;
        border: 1px solid #1f2937;
        border-radius: 12px;
        transition: all 0.18s ease;
      }
      .card.revealed .answers li {
        opacity: 0.35;
      }
      .card.revealed .answers li[data-correct="true"] {
        opacity: 1;
        background: linear-gradient(
          180deg,
          rgba(16, 185, 129, 0.2),
          rgba(34, 197, 94, 0.18)
        );
        border-color: rgba(34, 197, 94, 0.6);
        box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.3) inset;
      }

      .footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 12px;
        color: var(--muted);
      }

      /* Empty */
      .empty {
        opacity: 0.6;
        text-align: center;
        padding: 40px;
        border: 1px dashed #334155;
        border-radius: 16px;
      }

      /* Small helper */
      .pill {
        font-size: 12px;
        padding: 4px 8px;
        border: 1px solid #334155;
        border-radius: 999px;
      }

      @media (min-width: 900px) {
        .q {
          font-size: 18px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="wrap">
        <div class="title">
          <svg
            width="28"
            height="28"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
          >
            <path
              d="M4 6.5C4 5.12 5.12 4 6.5 4H12a4 4 0 0 1 4 4v.5h1.5A2.5 2.5 0 0 1 20 11v6.5A2.5 2.5 0 0 1 17.5 20H7.5A3.5 3.5 0 0 1 4 16.5V6.5Z"
              stroke="#9ca3af"
              stroke-width="1.3"
            />
            <path
              d="M8 8h5M8 11h5M8 14h3"
              stroke="#22c55e"
              stroke-width="1.6"
              stroke-linecap="round"
            />
          </svg>
          <h1>Flashcards Lite <span class="muted">· Medical Q&A</span></h1>
        </div>
        <div class="controls">
          <div class="search">
            <input
              id="search"
              type="search"
              placeholder="Search question text…"
              aria-label="Search"
            />
          </div>
          <div id="topicChips" class="chips" aria-label="Topic filters"></div>
          <button id="clearFilters" class="btn" title="Clear filters">
            Clear
          </button>
          <span id="count" class="muted"></span>
        </div>
      </div>
    </header>

    <main class="wrap">
      <section id="grid" class="grid" role="list"></section>
      <div id="empty" class="empty" hidden>
        No questions match your filters.
      </div>
    </main>

    <script>
      /*=======================
      1) Your data lives here
    =======================*/
      /**
       * Add your questions to QUESTIONS below.
       * Each item:
       *  - id: string or number (unique)
       *  - question: string
       *  - answers: array of strings (first answer may be correct OR set correctIndex)
       *  - correctIndex: number (0-based) — which answer is correct
       *  - topics: array of strings (used for filtering)
       */
      const QUESTIONS = [
        {
          id: 1,
          question:
            "Which organism most commonly causes community‑acquired pneumonia?",
          answers: [
            "Streptococcus pneumoniae",
            "Klebsiella pneumoniae",
            "Mycoplasma hominis",
            "Pseudomonas aeruginosa",
          ],
          correctIndex: 0,
          topics: ["Infectious disease", "Pulmonology"],
        },
        {
          id: 2,
          question: "Primary treatment for anaphylaxis?",
          answers: [
            "IV antihistamines",
            "Intramuscular epinephrine",
            "Nebulized salbutamol",
            "IV steroids",
          ],
          correctIndex: 1,
          topics: ["Allergy", "Emergency medicine"],
        },
        {
          id: 3,
          question: "ECG finding most specific for acute STEMI?",
          answers: [
            "ST elevation in contiguous leads",
            "T‑wave inversion",
            "QT prolongation",
            "U waves",
          ],
          correctIndex: 0,
          topics: ["Cardiology", "Emergency medicine"],
        },
        {
          id: 4,
          question: "First‑line therapy for mild persistent asthma in adults?",
          answers: [
            "Short‑acting beta‑agonist alone as needed",
            "Low‑dose inhaled corticosteroid",
            "Oral theophylline",
            "Leukotriene receptor antagonist alone",
          ],
          correctIndex: 1,
          topics: ["Pulmonology"],
        },
        {
          id: 5,
          question: "Which vitamin deficiency leads to night blindness?",
          answers: ["Vitamin A", "Vitamin C", "Vitamin D", "Vitamin K"],
          correctIndex: 0,
          topics: ["Ophthalmology", "Nutrition"],
        },
      ];

      /*=======================
      2) Helpers
    =======================*/
      const $ = (sel) => document.querySelector(sel);
      const $$ = (sel) => Array.from(document.querySelectorAll(sel));

      function uniqueTopics(data) {
        return Array.from(new Set(data.flatMap((q) => q.topics))).sort((a, b) =>
          a.localeCompare(b)
        );
      }

      function buildTopicChips(topics) {
        const box = document.getElementById("topicChips");
        box.innerHTML = "";
        topics.forEach((t) => {
          const id = `t_${t.replace(/[^a-z0-9]/gi, "_")}`;
          const chip = document.createElement("label");
          chip.className = "chip";
          chip.innerHTML = `<input type="checkbox" id="${id}" value="${t}" aria-label="${t}"><span>${t}</span>`;
          box.appendChild(chip);
        });
        // Add a small all/none helper
        if (topics.length) {
          const helper = document.createElement("span");
          helper.className = "pill muted";
          helper.style.marginLeft = "4px";
          helper.textContent = "Filter by topic";
          box.prepend(helper);
        }
      }

      function cardTemplate(q) {
        const topicsHTML = q.topics
          .map((t) => `<span class="topic">${t}</span>`)
          .join("");
        const answersHTML = q.answers
          .map((a, i) => `<li data-correct="${i === q.correctIndex}">${a}</li>`)
          .join("");
        return `<article class="card" role="listitem" tabindex="0" data-id="${q.id}">
        <div class="topicRow">${topicsHTML}</div>
        <div class="q">${q.question}</div>
        <ol class="answers" type="A">${answersHTML}</ol>
        <div class="footer"><span class="muted">Click to reveal the correct answer</span><span>#${q.id}</span></div>
      </article>`;
      }

      function render(data) {
        const grid = document.getElementById("grid");
        if (!data.length) {
          grid.innerHTML = "";
          document.getElementById("empty").hidden = false;
        } else {
          document.getElementById("empty").hidden = true;
          grid.innerHTML = data.map(cardTemplate).join("");
        }
        document.getElementById("count").textContent = `${
          data.length
        } question${data.length !== 1 ? "s" : ""}`;
      }

      function getActiveFilters() {
        const topicVals = $$("#topicChips input:checked").map((i) => i.value);
        const q = $("#search").value.trim().toLowerCase();
        return { topicVals, q };
      }

      function applyFilters() {
        const { topicVals, q } = getActiveFilters();
        const filtered = QUESTIONS.filter((item) => {
          const topicOk =
            !topicVals.length || item.topics.some((t) => topicVals.includes(t));
          const textOk = !q || item.question.toLowerCase().includes(q);
          return topicOk && textOk;
        });
        render(filtered);
      }

      /*=======================
      3) Interactions
    =======================*/
      function delegate(parent, selector, type, handler) {
        parent.addEventListener(type, (e) => {
          const t = e.target.closest(selector);
          if (t && parent.contains(t)) handler(e, t);
        });
      }

      function setupCardReveal() {
        const grid = document.getElementById("grid");
        const toggleReveal = (el) => {
          // Toggle reveal; holding Alt key resets instead
          if (el.classList.contains("revealed")) {
            el.classList.remove("revealed");
          } else {
            el.classList.add("revealed");
          }
        };
        delegate(grid, ".card", "click", (e, card) => {
          toggleReveal(card);
        });
        delegate(grid, ".card", "keydown", (e, card) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            toggleReveal(card);
          }
        });
      }

      function setupFilters() {
        document
          .getElementById("topicChips")
          .addEventListener("change", applyFilters);
        document
          .getElementById("search")
          .addEventListener("input", applyFilters);
        document
          .getElementById("clearFilters")
          .addEventListener("click", () => {
            $$("#topicChips input").forEach((i) => (i.checked = false));
            $("#search").value = "";
            applyFilters();
          });
      }

      /*=======================
      4) Init
    =======================*/
      (function init() {
        buildTopicChips(uniqueTopics(QUESTIONS));
        setupFilters();
        setupCardReveal();
        render(QUESTIONS);
      })();

      /*=======================
      5) Optional: how to import your own JSON at runtime
      (Uncomment to use. Keep this note for future you.)
    =======================*/
      // window.loadQuestionsFromJSON = function(json){
      //   try{
      //     const data = JSON.parse(json);
      //     if(!Array.isArray(data)) throw new Error('Expected an array');
      //     // basic shape validation
      //     data.forEach((q,i)=>{
      //       if(!q.question || !Array.isArray(q.answers) || typeof q.correctIndex !== 'number'){
      //         throw new Error(`Invalid item at index ${i}`);
      //       }
      //       q.topics = Array.isArray(q.topics) ? q.topics : [];
      //     });
      //     QUESTIONS.splice(0, QUESTIONS.length, ...data);
      //     buildTopicChips(uniqueTopics(QUESTIONS));
      //     applyFilters();
      //   }catch(err){
      //     alert('Import failed: ' + err.message);
      //   }
      // }
    </script>
  </body>
</html>
